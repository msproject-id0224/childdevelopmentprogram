import{r as h,u,j as e,H as M}from"./app-BrUyG7yk.js";import{A as F}from"./AuthenticatedLayout-CbzkO-it.js";import{P as n}from"./PrimaryButton-C22pO8mr.js";import{D as g}from"./DangerButton-7yz6ru8h.js";import{S as j}from"./SecondaryButton-CgUwEPPx.js";import{M as y}from"./Modal-BCZvBBvc.js";import{T as I}from"./TextInput-CriA2SlH.js";import{I as c}from"./InputLabel-BMpDstnu.js";import{I as d}from"./InputError-DlkBn7UG.js";import{P as A}from"./Pagination-BRUxRR9j.js";import{_ as t}from"./lang-BBLCHUjz.js";import"./Dropdown-waCO41fP.js";import"./transition-oyyIfUlq.js";import"./ThemeToggle-Bw0JqV72.js";import"./useTheme-BcNvbsKF.js";function q({auth:E,requests:a}){const[r,m]=h.useState(null),[b,l]=h.useState(!1),{data:N,setData:v,post:x,processing:o,errors:k,reset:P}=u({reason:""}),{data:U,setData:p,post:C,processing:w,errors:f,reset:S}=u({csv_file:null,photos:[]}),R=s=>{confirm(t("Are you sure you want to approve this photo?"))&&x(route("admin.profile-photos.approve",s))},B=s=>{m(s)},i=()=>{m(null),P()},_=s=>{s.preventDefault(),x(route("admin.profile-photos.reject",r.id),{onSuccess:()=>i()})},D=s=>{s.preventDefault(),C(route("admin.profile-photos.bulk"),{forceFormData:!0,onSuccess:()=>{l(!1),S()}})};return e.jsxs(F,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:t("Profile Photo Management")}),e.jsx(n,{onClick:()=>l(!0),children:t("Bulk Upload (CSV)")})]}),children:[e.jsx(M,{title:t("Photo Management")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsxs("h3",{className:"text-lg font-bold mb-6",children:[t("Pending Requests")," (",a.total,")"]}),a.data.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:t("No pending photo requests.")}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.data.map(s=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 flex flex-col items-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:`/storage/${s.photo_path}`,alt:s.user.name,className:"w-32 h-32 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:"font-semibold",children:s.user.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.user.email}),e.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1 capitalize",children:t(s.user.role)})]}),e.jsxs("div",{className:"flex space-x-2 w-full",children:[e.jsx(n,{onClick:()=>R(s.id),className:"flex-1 justify-center text-xs",disabled:o,children:t("Approve")}),e.jsx(g,{onClick:()=>B(s),className:"flex-1 justify-center text-xs",disabled:o,children:t("Reject")})]})]},s.id))}),e.jsx("div",{className:"mt-6",children:e.jsx(A,{links:a.links})})]})})})}),e.jsx(y,{show:!!r,onClose:i,children:e.jsxs("form",{onSubmit:_,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:t("Reject Profile Photo")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:t("Please provide a reason for rejecting the photo for :name",{name:r?.user.name})}),e.jsxs("div",{className:"mt-6",children:[e.jsx(c,{htmlFor:"reason",value:t("Reason"),className:"sr-only"}),e.jsx(I,{id:"reason",type:"text",name:"reason",value:N.reason,onChange:s=>v("reason",s.target.value),className:"mt-1 block w-full",placeholder:t("e.g., Image is blurry, inappropriate content, etc."),isFocused:!0}),e.jsx(d,{message:k.reason,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(j,{onClick:i,children:t("Cancel")}),e.jsx(g,{className:"ms-3",disabled:o,children:t("Reject Photo")})]})]})}),e.jsx(y,{show:b,onClose:()=>l(!1),children:e.jsxs("form",{onSubmit:D,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:t("Bulk Upload Profile Photos")}),e.jsxs("div",{className:"mt-6",children:[e.jsx(c,{htmlFor:"csv_file",value:t("CSV Template")}),e.jsx("input",{id:"csv_file",type:"file",accept:".csv",onChange:s=>p("csv_file",s.target.files[0]),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[t("CSV format"),": ",e.jsx("code",{children:"id_number,photo_name"})]}),e.jsx(d,{message:f.csv_file,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(c,{htmlFor:"photos",value:t("Photo Files")}),e.jsx("input",{id:"photos",type:"file",multiple:!0,accept:"image/*",onChange:s=>p("photos",Array.from(s.target.files)),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:t("Upload all photos listed in the CSV.")}),e.jsx(d,{message:f.photos,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(j,{onClick:()=>l(!1),children:t("Cancel")}),e.jsx(n,{className:"ms-3",disabled:w,children:t("Start Bulk Upload")})]})]})})]})}export{q as default};
