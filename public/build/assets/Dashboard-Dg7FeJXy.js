import{r as d,j as e,u as G,c as J,H as K,L as z}from"./app-DIMQ1j7c.js";import{A as Q}from"./AuthenticatedLayout-DinCI_jA.js";import{_ as t}from"./lang-BBLCHUjz.js";import{T as b}from"./TextInput-BJ_vSqdm.js";import{I as v}from"./InputLabel-BuNHIFco.js";import{M as Y}from"./Modal-CAr-gwKz.js";import{P as $}from"./PrimaryButton-w4LuAXHx.js";import{S as V}from"./SecondaryButton-DqsL44OG.js";import{I as N}from"./InputError-DI7IH1vY.js";import{D as W}from"./DangerButton-6CQWUw8r.js";import{S as B}from"./SelectInput-1TZvoJGi.js";import"./Dropdown-D2P50xqB.js";import"./transition-B3VWNPEY.js";import"./ThemeToggle-dTOLvmBw.js";import"./useTheme-ZKsmi1Rg.js";function X(){const[p,D]=d.useState([]),[m,i]=d.useState({}),[x,n]=d.useState(!0),[g,y]=d.useState(null),[k,w]=d.useState(!1),[j,A]=d.useState(null),[S,_]=d.useState(""),[h,c]=d.useState(!1),[I,T]=d.useState([]),[M,P]=d.useState(!1),[s,u]=d.useState({page:1,search:"",status:"all",priority:"all",sort_by:"date",sort_order:"asc"}),[f,C]=d.useState("");d.useEffect(()=>{const a=setTimeout(()=>{u(l=>({...l,search:f,page:1}))},500);return()=>clearTimeout(a)},[f]);const L=d.useCallback(async(a=!1)=>{a||n(!0),y(null);try{const l=await window.axios.get(route("api.schedules"),{params:s});D(l.data.data),i({current_page:l.data.current_page,last_page:l.data.last_page,from:l.data.from,to:l.data.to,total:l.data.total,links:l.data.links})}catch(l){console.error(l),y(t("Failed to load schedule data. Please try again later."))}finally{a||n(!1)}},[s]);d.useEffect(()=>{L();const a=setInterval(()=>L(!0),3e4);return()=>clearInterval(a)},[L]);const E=a=>{u(l=>({...l,sort_by:a,sort_order:l.sort_by===a&&l.sort_order==="asc"?"desc":"asc"}))},R=a=>{u(l=>({...l,page:a}))},F=a=>{switch(a){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},O=a=>{switch(a){case"scheduled":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"ongoing":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},H=a=>{A(a),_(""),T([]),w(!0),U(a)},U=async a=>{P(!0);try{const l=await axios.get(route("api.schedules.messages",a));T(l.data)}catch(l){console.error(l)}finally{P(!1)}},r=()=>{w(!1),A(null),_("")},o=async a=>{if(a.preventDefault(),!!S.trim()){c(!0);try{await window.axios.post(route("api.schedule-messages.store"),{schedule_id:j,message:S}),_(""),U(j)}catch(l){console.error("Error sending message:",l),alert("Failed to send message.")}finally{c(!1)}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsx("div",{className:"w-full sm:w-1/3",children:e.jsx(b,{type:"text",className:"w-full",placeholder:t("Search activity..."),value:f,onChange:a=>C(a.target.value)})}),e.jsx("div",{className:"w-full sm:w-1/4",children:e.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:s.status,onChange:a=>u(l=>({...l,status:a.target.value,page:1})),children:[e.jsx("option",{value:"all",children:t("All Status")}),e.jsx("option",{value:"scheduled",children:t("Scheduled")}),e.jsx("option",{value:"ongoing",children:t("Ongoing")}),e.jsx("option",{value:"completed",children:t("Completed")}),e.jsx("option",{value:"cancelled",children:t("Cancelled")})]})}),e.jsx("div",{className:"w-full sm:w-1/4",children:e.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:s.priority,onChange:a=>u(l=>({...l,priority:a.target.value,page:1})),children:[e.jsx("option",{value:"all",children:t("All Priorities")}),e.jsx("option",{value:"high",children:t("High")}),e.jsx("option",{value:"medium",children:t("Medium")}),e.jsx("option",{value:"low",children:t("Low")})]})})]}),g&&e.jsx("div",{className:"p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-800 dark:text-red-100",role:"alert",children:g}),e.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>E("name"),children:e.jsxs("div",{className:"flex items-center",children:[t("Activity"),s.sort_by==="name"&&e.jsx("span",{className:"ml-1",children:s.sort_order==="asc"?"↑":"↓"})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>E("date"),children:e.jsxs("div",{className:"flex items-center",children:[t("Date & Time"),s.sort_by==="date"&&e.jsx("span",{className:"ml-1",children:s.sort_order==="asc"?"↑":"↓"})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:t("Location")}),e.jsx("th",{scope:"col",className:"px-6 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>E("priority"),children:e.jsxs("div",{className:"flex items-center",children:[t("Priority"),s.sort_by==="priority"&&e.jsx("span",{className:"ml-1",children:s.sort_order==="asc"?"↑":"↓"})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:t("Status")}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:t("Actions")})]})}),e.jsx("tbody",{children:x&&p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3 text-blue-500",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t("Loading...")]})})}):p.length>0?p.map(a=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:a.name}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{children:a.date}),e.jsxs("div",{className:"text-xs text-gray-500",children:[a.start_time?a.start_time.substring(0,5):""," - ",a.end_time?a.end_time.substring(0,5):""]})]}),e.jsx("td",{className:"px-6 py-4",children:a.location||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${F(a.priority)}`,children:a.priority?String(a.priority).charAt(0).toUpperCase()+String(a.priority).slice(1):"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${O(a.status)}`,children:a.status?String(a.status).charAt(0).toUpperCase()+String(a.status).slice(1):"Scheduled"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>H(a.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200 text-sm font-medium",children:t("Send Message")})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:t("No schedules found.")})})})]})}),m.last_page>1&&e.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:m.links&&m.links.map((a,l)=>e.jsx("button",{onClick:()=>a.url&&R(new URL(a.url).searchParams.get("page")),disabled:!a.url,className:`px-3 py-1 rounded-md text-sm ${a.active?"bg-blue-600 text-white":a.url?"bg-white text-gray-700 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 border border-gray-300 dark:border-gray-600":"text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:a.label}},l))}),x&&p.length>0&&e.jsx("div",{className:"text-right text-xs text-gray-400 mt-2",children:t("Updating data...")}),e.jsx(Y,{show:k,onClose:r,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:t("Send Message to Admin")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:t("Send a message regarding this schedule. The admin will be notified.")}),e.jsxs("div",{className:"mt-4 mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("History")}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md p-3 h-48 overflow-y-auto",children:M?e.jsx("p",{className:"text-center text-gray-500 text-sm py-4",children:t("Loading...")}):I.length===0?e.jsx("p",{className:"text-center text-gray-500 text-sm py-4",children:t("No messages yet.")}):e.jsx("div",{className:"space-y-3",children:I.map(a=>e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200",children:a.user?.name}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(a.created_at).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:a.message})]},a.id))})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(v,{htmlFor:"message",value:t("Message")}),e.jsx("textarea",{id:"message",className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",rows:"4",value:S,onChange:a=>_(a.target.value),placeholder:t("Type your message here...")})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(V,{onClick:r,children:t("Cancel")}),e.jsx($,{className:"ml-3",onClick:o,disabled:h,children:h?t("Sending..."):t("Send Message")})]})]})})]})}function Z(){const[p,D]=d.useState([]),[m,i]=d.useState(!1),[x,n]=d.useState({}),[g,y]=d.useState({search:"",status:"all",date:"",priority:"all",page:1}),[k,w]=d.useState(!1),[j,A]=d.useState("add"),[S,_]=d.useState(null),{data:h,setData:c,post:I,patch:T,delete:M,processing:P,errors:s,reset:u,clearErrors:f}=G({name:"",date:"",start_time:"",end_time:"",description:"",priority:"medium",pic:"",location:"",status:"scheduled"}),C=async()=>{i(!0);try{const r={...g};Object.keys(r).forEach(a=>{(r[a]===""||r[a]==="all")&&delete r[a]});const o=await window.axios.get(route("api.schedules"),{params:r});D(o.data.data),n(o.data)}catch(r){console.error("Error fetching schedules:",r)}finally{i(!1)}};d.useEffect(()=>{const r=setTimeout(()=>{C()},300);return()=>clearTimeout(r)},[g]);const L=(r,o)=>{y(a=>({...a,[r]:o,page:1}))},E=r=>{if(!r)return;const a=new URL(r).searchParams.get("page");y(l=>({...l,page:a}))},R=(r,o=null)=>{A(r),_(o),f(),r==="edit"&&o?c({name:o.name,date:o.date,start_time:o.start_time?o.start_time.substring(0,5):"",end_time:o.end_time?o.end_time.substring(0,5):"",description:o.description||"",priority:o.priority,pic:o.pic,location:o.location||"",status:o.status||"scheduled"}):(u(),c("date",new Date().toISOString().split("T")[0])),w(!0)},F=()=>{w(!1),u()},O=r=>{r.preventDefault();const o=j==="add"?route("schedule.store"):route("schedule.update",S.id);(j==="add"?I:T)(o,{onSuccess:()=>{F(),C()}})},H=()=>{confirm(t("Are you sure you want to delete this activity?"))&&M(route("schedule.destroy",S.id),{onSuccess:()=>{F(),C()}})},U=r=>{switch(r){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsx(b,{placeholder:t("Search schedules..."),value:g.search,onChange:r=>L("search",r.target.value),className:"w-full sm:w-64"}),e.jsxs(B,{value:g.status,onChange:r=>L("status",r.target.value),className:"w-full sm:w-40",children:[e.jsx("option",{value:"all",children:t("All Status")}),e.jsx("option",{value:"scheduled",children:t("Scheduled")}),e.jsx("option",{value:"ongoing",children:t("Ongoing")}),e.jsx("option",{value:"completed",children:t("Completed")}),e.jsx("option",{value:"cancelled",children:t("Cancelled")})]}),e.jsx(b,{type:"date",value:g.date,onChange:r=>L("date",r.target.value),className:"w-full sm:w-40"})]}),e.jsx($,{onClick:()=>R("add"),children:t("Add Schedule")})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("Activity")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("Date & Time")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("Priority")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("PIC")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("Status")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("Actions")})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:t("Loading...")})}):p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:t("No schedules found.")})}):p.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.name}),r.location&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.location})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:new Date(r.date).toLocaleDateString()}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.start_time.substring(0,5)," - ",r.end_time.substring(0,5)]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${U(r.priority)}`,children:t(r.priority)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:r.pic}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 capitalize",children:t(r.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>R("edit",r),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3",children:t("Edit")})})]},r.id))})]})}),x.links&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-400",children:[t("Showing")," ",x.from," ",t("to")," ",x.to," ",t("of")," ",x.total," ",t("results")]}),e.jsx("div",{className:"flex gap-1",children:x.links.map((r,o)=>e.jsx("button",{onClick:()=>E(r.url),disabled:!r.url||r.active,className:`px-3 py-1 rounded text-sm ${r.active?"bg-indigo-600 text-white":r.url?"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600":"text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:r.label}},o))})]})})]}),e.jsx(Y,{show:k,onClose:F,children:e.jsxs("form",{onSubmit:O,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-6",children:j==="add"?t("Add Schedule"):t("Edit Schedule")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"name",value:t("Activity Name")}),e.jsx(b,{id:"name",value:h.name,onChange:r=>c("name",r.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(N,{message:s.name,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"date",value:t("Date")}),e.jsx(b,{id:"date",type:"date",value:h.date,onChange:r=>c("date",r.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(N,{message:s.date,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"status",value:t("Status")}),e.jsxs(B,{id:"status",value:h.status,onChange:r=>c("status",r.target.value),className:"mt-1 block w-full",children:[e.jsx("option",{value:"scheduled",children:t("Scheduled")}),e.jsx("option",{value:"ongoing",children:t("Ongoing")}),e.jsx("option",{value:"completed",children:t("Completed")}),e.jsx("option",{value:"cancelled",children:t("Cancelled")})]}),e.jsx(N,{message:s.status,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"start_time",value:t("Start Time")}),e.jsx(b,{id:"start_time",type:"time",value:h.start_time,onChange:r=>c("start_time",r.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(N,{message:s.start_time,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"end_time",value:t("End Time")}),e.jsx(b,{id:"end_time",type:"time",value:h.end_time,onChange:r=>c("end_time",r.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(N,{message:s.end_time,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"location",value:t("Location")}),e.jsx(b,{id:"location",value:h.location,onChange:r=>c("location",r.target.value),className:"mt-1 block w-full"}),e.jsx(N,{message:s.location,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"priority",value:t("Priority")}),e.jsxs(B,{id:"priority",value:h.priority,onChange:r=>c("priority",r.target.value),className:"mt-1 block w-full",children:[e.jsx("option",{value:"low",children:t("Low")}),e.jsx("option",{value:"medium",children:t("Medium")}),e.jsx("option",{value:"high",children:t("High")})]}),e.jsx(N,{message:s.priority,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"pic",value:t("PIC")}),e.jsx(b,{id:"pic",value:h.pic,onChange:r=>c("pic",r.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(N,{message:s.pic,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"description",value:t("Description")}),e.jsx(b,{id:"description",value:h.description,onChange:r=>c("description",r.target.value),className:"mt-1 block w-full"}),e.jsx(N,{message:s.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[j==="edit"?e.jsx(W,{type:"button",onClick:H,disabled:P,children:t("Delete")}):e.jsx("div",{}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(V,{onClick:F,children:t("Cancel")}),e.jsx($,{disabled:P,children:j==="add"?t("Create"):t("Update")})]})]})]})})]})}function q({initialRequests:p}){const[D,m]=d.useState(p||[]),[i,x]=d.useState(""),[n,g]=d.useState(null),[y,k]=d.useState(null);d.useEffect(()=>{m(p||[])},[p]);const{data:w,setData:j,post:A,processing:S,errors:_,reset:h}=G({reason:""}),c=D.filter(s=>{const u=s.user?.name||s.user?.first_name||"",f=s.user?.email||"",C=i.toLowerCase();return u.toLowerCase().includes(C)||f.toLowerCase().includes(C)}),I=s=>{confirm(t("Are you sure you want to approve this photo?"))&&(k(s),J.post(route("admin.profile-photos.approve",s),{},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m(u=>u.filter(f=>f.id!==s)),k(null)},onError:()=>k(null)}))},T=s=>{g(s),j("reason","")},M=()=>{g(null),h()},P=s=>{s.preventDefault(),A(route("admin.profile-photos.reject",n.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m(u=>u.filter(f=>f.id!==n.id)),M()}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:t("Pending Photo Requests")}),e.jsx("div",{className:"w-full sm:w-64",children:e.jsx(b,{type:"text",placeholder:t("Search requests..."),value:i,onChange:s=>x(s.target.value),className:"w-full"})})]}),c.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:i?t("No requests found matching your search."):t("No pending photo requests.")}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 flex flex-col items-center shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"mb-4 relative group",children:[e.jsx("img",{src:s.photo_url,alt:s.user?.name||s.user?.first_name||"User",className:"w-32 h-32 rounded-full object-cover border-4 border-gray-100 dark:border-gray-700 group-hover:border-indigo-100 dark:group-hover:border-indigo-900 transition-colors"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity"})]}),e.jsxs("div",{className:"text-center mb-4 flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:s.user?.name||s.user?.first_name||"User"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.user?.email}),e.jsx("span",{className:`inline-block mt-2 px-2 py-0.5 text-[10px] rounded-full capitalize ${s.user?.role==="mentor"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:t(s.user?.role||"participant")}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex space-x-2 w-full mt-auto",children:[e.jsx($,{onClick:()=>I(s.id),className:"flex-1 justify-center text-xs",disabled:y===s.id,children:y===s.id?t("Processing..."):t("Approve")}),e.jsx(W,{onClick:()=>T(s),className:"flex-1 justify-center text-xs",disabled:y===s.id,children:t("Reject")})]})]},s.id))}),e.jsx(Y,{show:!!n,onClose:M,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:t("Reject Profile Photo")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:t("Please provide a reason for rejecting the photo for :name",{name:n?.user?.name||n?.user?.first_name||"User"})}),e.jsxs("div",{className:"mt-6",children:[e.jsx(v,{htmlFor:"reason",value:t("Reason"),className:"sr-only"}),e.jsx(b,{id:"reason",type:"text",name:"reason",value:w.reason,onChange:s=>j("reason",s.target.value),className:"mt-1 block w-full",placeholder:t("e.g., Image is blurry, inappropriate content, etc."),isFocused:!0}),e.jsx(N,{message:_.reason,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(V,{onClick:M,children:t("Cancel")}),e.jsx(W,{className:"ms-3",onClick:P,disabled:S,children:t("Reject Photo")})]})]})})]})}function ue({auth:p,schedules:D,photoRequests:m}){const i=p.user,x=i?.role?String(i.role):"participant",[n,g]=d.useState("overview"),y=()=>i?.name||i?.first_name||"User",k=()=>y().charAt(0).toUpperCase(),w=()=>x.charAt(0).toUpperCase()+x.slice(1);return i?e.jsxs(Q,{header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:[t("Dashboard")," ",w()]}),children:[e.jsx(K,{title:t("Dashboard")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6",children:[e.jsxs("div",{className:"relative",children:[i.profile_photo_url?e.jsx("img",{src:i.profile_photo_url,alt:y(),className:"w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-md"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center text-blue-600 dark:text-blue-400 text-2xl font-bold border-4 border-white dark:border-gray-800 shadow-md",children:k()}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-2 border-white dark:border-gray-800 shadow-sm ${i.profile_photo_status==="active"?"bg-green-500":i.profile_photo_status==="pending"?"bg-yellow-500":"bg-red-500"}`,title:t(`Photo Status: ${i.profile_photo_status}`)})]}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h4",{className:"text-lg font-semibold",children:y()}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:i.email}),e.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-2",children:[e.jsxs("span",{className:`px-2 py-0.5 text-xs rounded-full ${i.profile_photo_status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":i.profile_photo_status==="pending"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[t("Photo Status"),": ",e.jsx("span",{className:"capitalize",children:t(i.profile_photo_status)})]}),e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 capitalize",children:t(i.role)})]})]})]})}),i.role==="admin"&&e.jsxs("div",{children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:[e.jsx("button",{onClick:()=>g("overview"),className:`${n==="overview"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:t("Overview")}),e.jsx("button",{onClick:()=>g("schedule"),className:`${n==="schedule"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:t("Schedule")}),e.jsxs("button",{onClick:()=>g("photos"),className:`${n==="photos"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[t("Photo Requests"),m&&m.length>0&&e.jsx("span",{className:"ml-2 bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-200 py-0.5 px-2 rounded-full text-xs",children:m.length})]})]})}),n==="overview"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:t("Admin Panel")}),e.jsx("p",{className:"mb-6",children:t("Welcome, Administrator. You have full access to the system.")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(z,{href:route("mentors.index"),className:"p-6 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition shadow-sm dark:bg-blue-900/20 dark:border-blue-800 dark:hover:bg-blue-900/30",children:[e.jsx("h4",{className:"font-semibold text-blue-700 dark:text-blue-400",children:t("Mentor List")}),e.jsx("p",{className:"text-sm text-blue-600 mt-2 dark:text-blue-500",children:t("Manage and view all registered mentors.")})]}),e.jsxs(z,{href:route("participants.index"),className:"p-6 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition shadow-sm dark:bg-green-900/20 dark:border-green-800 dark:hover:bg-green-900/30",children:[e.jsx("h4",{className:"font-semibold text-green-700 dark:text-green-400",children:t("Participant List")}),e.jsx("p",{className:"text-sm text-green-600 mt-2 dark:text-green-500",children:t("Manage and view all registered participants.")})]})]})]}),n==="schedule"&&e.jsx("div",{className:"animate-fade-in",children:e.jsx(Z,{})}),n==="photos"&&e.jsx("div",{className:"animate-fade-in",children:e.jsx(q,{initialRequests:m})})]}),x==="mentor"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:t("Mentor/Implementer Panel")}),e.jsx("p",{className:"mb-6",children:t("Welcome, Mentor. You can manage participants and programs.")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:e.jsxs(z,{href:route("participants.index"),className:"p-6 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition shadow-sm dark:bg-green-900/20 dark:border-green-800 dark:hover:bg-green-900/30",children:[e.jsx("h4",{className:"font-semibold text-green-700 dark:text-green-400",children:t("Participant List")}),e.jsx("p",{className:"text-sm text-green-600 mt-2 dark:text-green-500",children:t("Manage and view all registered participants.")})]})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:t("Schedule")}),e.jsx(X,{})]})]}),x==="participant"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:t("Participant Panel")}),e.jsx("p",{children:t("Welcome to the Child Development Program. Please check your schedule.",{nickname:i.nickname||i.first_name})})]})]})})})})]}):null}export{ue as default};
