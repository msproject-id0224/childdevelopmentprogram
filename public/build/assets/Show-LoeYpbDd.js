import{a as ge,r,j as e,H as he,L as Z,b as n}from"./app-BrUyG7yk.js";import{A as ye}from"./AuthenticatedLayout-CbzkO-it.js";import{_ as t}from"./lang-BBLCHUjz.js";import{P as c}from"./PrimaryButton-C22pO8mr.js";import{S as ue}from"./SecondaryButton-CgUwEPPx.js";import{T as x}from"./TextInput-CriA2SlH.js";import{S as je}from"./SelectInput-BFHLakmA.js";import"./Dropdown-waCO41fP.js";import"./transition-oyyIfUlq.js";import"./ThemeToggle-Bw0JqV72.js";import"./Modal-BCZvBBvc.js";import"./DangerButton-7yz6ru8h.js";import"./useTheme-BcNvbsKF.js";function Ae({auth:ee,participant:a,notes:se,tasks:te,meetings:ae,messages:y,metrics:l,analytics:u}){const{locale:j}=ge().props,v=ee?.user?.role==="admin",[N,re]=r.useState(a.is_active?"active":"inactive"),[p,k]=r.useState(!1),[b,f]=r.useState(""),[o,w]=r.useState(""),[S,_]=r.useState(!1),[T,D]=r.useState(""),[C,de]=r.useState(se||[]),[m,L]=r.useState(""),[A,M]=r.useState(""),[E,I]=r.useState(""),[P,U]=r.useState(!1),[F,g]=r.useState(""),[B,H]=r.useState(te||[]),[h,G]=r.useState(""),[R,$]=r.useState(""),[W,q]=r.useState(""),[z,J]=r.useState(!1),[K,O]=r.useState(""),[Q,le]=r.useState(ae||[]),V=s=>s?new Date(s).toLocaleDateString(j==="id"?"id-ID":"en-US",{day:"numeric",month:"long",year:"numeric"}):"-",i=s=>s?new Date(s).toLocaleString(j==="id"?"id-ID":"en-US"):"-",ie=async()=>{k(!0),f("");try{await n.patch(route("participants.status.update",a.id),{status:N})}catch{f(t("Failed to update status."))}finally{k(!1)}},ne=async()=>{if(o.trim()){_(!0),D("");try{const s=await n.post(route("participants.notes.store",a.id),{note:o});de(d=>[s.data,...d]),w("")}catch{D(t("Failed to add note."))}finally{_(!1)}}},ce=async()=>{if(m.trim()){U(!0),g("");try{const s=await n.post(route("participants.tasks.store",a.id),{title:m,description:A||null,due_date:E||null});H(d=>[s.data,...d]),L(""),M(""),I("")}catch{g(t("Failed to add task."))}finally{U(!1)}}},xe=async(s,d)=>{try{const X=await n.patch(route("participants.tasks.update",{participant:a.id,task:s}),{status:d});H(me=>me.map(Y=>Y.id===s?X.data:Y))}catch{g(t("Failed to update task status."))}},oe=async()=>{if(h){J(!0),O("");try{const s=await n.post(route("participants.meetings.store",a.id),{scheduled_at:h,location:R||null,agenda:W||null});le(d=>[s.data,...d]),G(""),$(""),q("")}catch{O(t("Failed to schedule meeting."))}finally{J(!1)}}};return e.jsxs(ye,{header:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("nav",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(Z,{href:route("dashboard"),className:"hover:text-gray-700 dark:hover:text-gray-200",children:t("Dashboard")}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(Z,{href:route("participants.index"),className:"hover:text-gray-700 dark:hover:text-gray-200",children:t("Participants")}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:t("My Participant")})]}),e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:t("My Participant")})]}),children:[e.jsx(he,{title:t("My Participant")}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-bold",children:(a.first_name?.[0]||"P").toUpperCase()}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[a.first_name," ",a.last_name||"",e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[a.first_name," ",a.last_name||"",a.nickname&&e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",a.nickname,")"]})]}),"                                        ",a.nickname&&e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",a.nickname,")"]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.email})]})]}),v&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(je,{value:N,onChange:s=>re(s.target.value),className:"w-36",children:[e.jsx("option",{value:"active",children:t("Active")}),e.jsx("option",{value:"inactive",children:t("Inactive")})]}),e.jsx(c,{onClick:ie,disabled:p,children:p?t("Saving..."):t("Update Status")})]})]}),v&&b&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:b}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("ID Number")}),e.jsx("div",{children:a.id_number||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Date of Birth")}),e.jsx("div",{children:V(a.date_of_birth)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Gender")}),e.jsx("div",{children:a.gender||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Age")}),e.jsx("div",{children:a.age||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Education")}),e.jsx("div",{children:a.education||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Age Group")}),e.jsx("div",{children:a.age_group||"-"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-5",children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Total Tasks")}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.total_tasks})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-5",children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Completed Tasks")}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.completed_tasks})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-5",children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Completion Rate")}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[l.completion_rate,"%"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-5",children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Meetings")}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.meetings_count})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-5",children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Upcoming Meetings")}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.upcoming_meetings_count})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-5",children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Messages")}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.messages_count})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:t("Performance Analytics")}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Last Message")}),e.jsx("div",{children:i(u.last_message_at)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:t("Last Meeting")}),e.jsx("div",{children:i(u.last_meeting_at)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:t("Add Note")}),e.jsx("textarea",{className:"mt-3 w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100",rows:"3",value:o,onChange:s=>w(s.target.value),placeholder:t("Write note...")}),T&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:T}),e.jsx("div",{className:"mt-3",children:e.jsx(c,{onClick:ne,disabled:S,children:S?t("Saving..."):t("Add Note")})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[C.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:t("No notes yet.")}),C.map(s=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 text-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:i(s.created_at)}),e.jsx("div",{className:"text-gray-700 dark:text-gray-200",children:s.note})]},s.id))]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:t("Assigned Tasks")}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[e.jsx(x,{value:m,onChange:s=>L(s.target.value),placeholder:t("Task title")}),e.jsx("textarea",{className:"w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100",rows:"2",value:A,onChange:s=>M(s.target.value),placeholder:t("Task description")}),e.jsx(x,{type:"date",value:E,onChange:s=>I(s.target.value)}),F&&e.jsx("p",{className:"text-sm text-red-600",children:F}),e.jsx(c,{onClick:ce,disabled:P,children:P?t("Saving..."):t("Add Task")})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[B.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:t("No tasks yet.")}),B.map(s=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-100",children:s.title}),e.jsx("span",{className:"text-xs text-gray-500",children:s.status})]}),s.description&&e.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:s.description}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-gray-500",children:s.due_date?`${t("Due")} ${V(s.due_date)}`:"-"}),s.status!=="completed"&&e.jsx(ue,{onClick:()=>xe(s.id,"completed"),children:t("Mark Completed")})]})]},s.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:t("Schedule Meeting")}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[e.jsx(x,{type:"datetime-local",value:h,onChange:s=>G(s.target.value)}),e.jsx(x,{value:R,onChange:s=>$(s.target.value),placeholder:t("Location")}),e.jsx("textarea",{className:"w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100",rows:"2",value:W,onChange:s=>q(s.target.value),placeholder:t("Agenda")}),K&&e.jsx("p",{className:"text-sm text-red-600",children:K}),e.jsx(c,{onClick:oe,disabled:z,children:z?t("Saving..."):t("Schedule")})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[Q.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:t("No meetings yet.")}),Q.map(s=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-100",children:i(s.scheduled_at)}),e.jsx("span",{className:"text-xs text-gray-500",children:s.status})]}),s.location&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.location}),s.agenda&&e.jsx("div",{className:"text-gray-600 dark:text-gray-300 mt-1",children:s.agenda})]},s.id))]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:t("Communication History")}),e.jsxs("div",{className:"mt-4 space-y-3 max-h-96 overflow-y-auto",children:[y.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:t("No messages yet.")}),y.map(s=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-100",children:s.sender?.name||t("User")}),e.jsx("div",{className:"text-xs text-gray-500",children:i(s.created_at)})]}),e.jsx("div",{className:"mt-2 text-gray-600 dark:text-gray-300",children:s.message})]},s.id))]})]})]})]})})]})}export{Ae as default};
