import{a as b,r as u,c as m,j as e,H as N,L as h}from"./app-BrUyG7yk.js";import{A as w}from"./AuthenticatedLayout-CbzkO-it.js";import{_ as t}from"./lang-BBLCHUjz.js";import{P as _}from"./Pagination-BRUxRR9j.js";import{T as A}from"./TextInput-CriA2SlH.js";import{S as o}from"./SelectInput-BFHLakmA.js";import"./Dropdown-waCO41fP.js";import"./transition-oyyIfUlq.js";import"./ThemeToggle-Bw0JqV72.js";import"./Modal-BCZvBBvc.js";import"./PrimaryButton-C22pO8mr.js";import"./SecondaryButton-CgUwEPPx.js";import"./DangerButton-7yz6ru8h.js";import"./useTheme-BcNvbsKF.js";function Q({auth:c,participants:l,filters:i,mentors:p}){const{locale:P}=b().props,d=c?.user?.role==="admin";c?.user?.role==="admin"||c?.user?.role;const[s,n]=u.useState({search:i.search||"",status:i.status||"",gender:i.gender||"",age_group:i.age_group||"",sort_by:i.sort_by||"created_at",sort_direction:i.sort_direction||"desc",per_page:i.per_page||"10"}),y=u.useRef(!0),j=r=>{if(!r)return"-";const a=r.toString(),v="ID-0224";return a.startsWith(v)?a:v+a.padStart(5,"0")},f=r=>{d&&m.patch(route("participants.toggle-status",r))},k=(r,a)=>{d&&m.patch(route("participants.assign-mentor",r),{mentor_id:a},{preserveScroll:!0})};u.useEffect(()=>{if(y.current){y.current=!1;return}const r=setTimeout(()=>{m.get(route("participants.index"),s,{preserveState:!0,preserveScroll:!0,replace:!0})},300);return()=>clearTimeout(r)},[s]);const x=r=>{n(a=>({...a,sort_by:r,sort_direction:a.sort_by===r&&a.sort_direction==="asc"?"desc":"asc"}))},g=({column:r})=>s.sort_by!==r?e.jsx("span",{className:"ml-1 text-gray-400",children:"⇅"}):s.sort_direction==="asc"?e.jsx("span",{className:"ml-1",children:"↑"}):e.jsx("span",{className:"ml-1",children:"↓"});return e.jsxs(w,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:t("Participant List")}),d&&e.jsx(h,{href:route("participants.create"),className:"inline-flex items-center px-4 py-2 bg-gray-800 dark:bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-white dark:text-gray-800 uppercase tracking-widest hover:bg-gray-700 dark:hover:bg-white focus:bg-gray-700 dark:focus:bg-white active:bg-gray-900 dark:active:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",children:t("Add Participant")})]}),children:[e.jsx(N,{title:t("Participant List")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg dark:bg-gray-800 p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"w-full md:w-1/3",children:e.jsx(A,{placeholder:t("Search..."),className:"w-full",value:s.search,onChange:r=>n({...s,search:r.target.value})})}),e.jsx("div",{className:"w-full md:w-1/4",children:e.jsxs(o,{className:"w-full",value:s.status,onChange:r=>n({...s,status:r.target.value}),children:[e.jsx("option",{value:"",children:t("All Status")}),e.jsx("option",{value:"active",children:t("Active")}),e.jsx("option",{value:"inactive",children:t("Inactive")})]})}),e.jsx("div",{className:"w-full md:w-1/4",children:e.jsxs(o,{className:"w-full",value:s.gender,onChange:r=>n({...s,gender:r.target.value}),children:[e.jsx("option",{value:"",children:t("All Gender")}),e.jsx("option",{value:"Laki-laki",children:t("Laki-laki")}),e.jsx("option",{value:"Perempuan",children:t("Perempuan")})]})}),e.jsx("div",{className:"w-full md:w-1/4",children:e.jsxs(o,{className:"w-full",value:s.age_group,onChange:r=>n({...s,age_group:r.target.value}),children:[e.jsx("option",{value:"",children:t("All Age Groups")}),e.jsx("option",{value:"0-2",children:t("0-2")}),e.jsx("option",{value:"3-5",children:t("3-5")}),e.jsx("option",{value:"6-8",children:t("6-8")}),e.jsx("option",{value:"9-11",children:t("9-11")}),e.jsx("option",{value:"12-14",children:t("12-14")}),e.jsx("option",{value:"15-18",children:t("15-18")}),e.jsx("option",{value:"19+",children:t("19+")})]})}),e.jsx("div",{className:"w-full md:w-1/6",children:e.jsxs(o,{className:"w-full",value:s.per_page,onChange:r=>n({...s,per_page:r.target.value}),children:[e.jsxs("option",{value:"10",children:["10 / ",t("Page")]}),e.jsxs("option",{value:"25",children:["25 / ",t("Page")]}),e.jsxs("option",{value:"50",children:["50 / ",t("Page")]}),e.jsxs("option",{value:"100",children:["100 / ",t("Page")]}),e.jsxs("option",{value:"250",children:["250 / ",t("Page")]})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>x("first_name"),className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:[t("Name")," ",e.jsx(g,{column:"first_name"})]}),e.jsxs("th",{onClick:()=>x("id_number"),className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 hidden md:table-cell",children:[t("ID")," ",e.jsx(g,{column:"id_number"})]}),e.jsxs("th",{onClick:()=>x("age"),className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:[t("Age/Gender")," ",e.jsx(g,{column:"age"})]}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 hidden lg:table-cell",children:t("Age Group")}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:t("Status")}),d&&e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 hidden lg:table-cell",children:t("Assigned Mentor")}),d&&e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:t("Actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:l.data&&l.data.length>0?l.data.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition duration-150 ease-in-out",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs(h,{href:route("participants.show",r.id),className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 hover:underline",children:[r.first_name," ",r.last_name]}),r.nickname&&e.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:["(",r.nickname,")"]})]})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap hidden md:table-cell",children:e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:j(r.id_number)})}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs text-gray-900 dark:text-gray-100",children:r.age?`${r.age} ${t("Years")}`:"-"}),e.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:r.gender?t(r.gender):"-"})]}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-500 dark:text-gray-400 hidden lg:table-cell",children:r.age_group?t(r.age_group):"-"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-[10px] leading-5 font-semibold rounded-full ${r.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:r.is_active?t("Active"):t("Inactive")})}),d&&e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-500 dark:text-gray-400 hidden lg:table-cell",children:e.jsxs("select",{className:"block w-full py-1 px-2 text-xs border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:r.mentor_id||"",onChange:a=>k(r.id,a.target.value),children:[e.jsx("option",{value:"",children:t("Unassigned")}),p&&p.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),d&&e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{href:route("participants.edit",r.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:t("Edit")}),e.jsx("button",{onClick:()=>f(r.id),className:`${r.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,children:r.is_active?t("Deactivate"):t("Activate")})]})})]},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:d?7:5,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:t("No participants found.")})})})]})}),e.jsx("div",{className:"mt-4",children:e.jsx(_,{links:l.links})})]})})})]})}export{Q as default};
