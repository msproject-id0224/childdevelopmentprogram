import{a as v,u as E,r as f,j as e,H as N,b as k,c as w}from"./app-DIMQ1j7c.js";import{I as P}from"./InputError-DI7IH1vY.js";import{I as S}from"./InputLabel-BuNHIFco.js";import{P as I}from"./PrimaryButton-w4LuAXHx.js";import{T as L}from"./TextInput-BJ_vSqdm.js";import{G as C}from"./GuestLayout-CMUXNBsR.js";import{_ as s}from"./lang-BBLCHUjz.js";import"./useTheme-ZKsmi1Rg.js";function q({status:n,canResetPassword:T}){const{flash:l}=v().props,{data:o,setData:p,processing:g,errors:b,setError:y,clearErrors:h}=E({email:""}),[m,a]=f.useState(""),[c,d]=f.useState(!1),i=r=>!r||r.trim()===""?(a(s("Email is required")),!1):(a(""),!0),j=async r=>{if(r.preventDefault(),a(""),h(),!!i(o.email)){d(!0);try{const t=await k.post(route("login"),{email:o.email});t.status===200&&t.data.success&&t.data.nextScreen==="otp"?w.visit(route("otp.view")):a("Unexpected response from server.")}catch(t){if(console.error("Login error:",t),t.response)if(t.response.status===422){const u=t.response.data.errors;Object.keys(u).forEach(x=>{y(x,u[x][0])})}else a(t.response.data.message||"An error occurred. Please try again.");else a("Network error. Please check your connection.")}finally{d(!1)}}};return e.jsxs(C,{children:[e.jsx(N,{title:s("Login")}),n&&e.jsx("div",{className:"mb-4 text-sm font-medium text-green-600",children:n}),l?.error&&e.jsx("div",{className:"mb-4 text-sm font-medium text-red-600 bg-red-100 p-3 rounded border border-red-200",children:l.error}),e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:s("Login")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:s("Enter your email to receive an OTP code.")})]}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"email",value:s("Email"),className:"text-gray-500 dark:text-gray-400 font-semibold"}),e.jsx(L,{id:"email",type:"email",name:"email",value:o.email,className:"mt-1 block w-full bg-white/50 border-white/30 focus:bg-white/70 dark:bg-gray-800/50 dark:border-gray-700/50 dark:focus:bg-gray-800/70 transition-all",autoComplete:"username",isFocused:!0,onChange:r=>{p("email",r.target.value),m&&i(r.target.value)},onBlur:r=>i(r.target.value)}),e.jsx(P,{message:m||b.email,className:"mt-2"})]}),e.jsx("div",{className:"mt-6 flex items-center justify-center",children:e.jsx(I,{className:"w-full justify-center py-3",disabled:c||g,children:c?s("Sending..."):s("Send OTP Code")})})]})]})}export{q as default};
