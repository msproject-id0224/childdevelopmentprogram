import{j as e,r as g,u as f,H as T}from"./app-DIMQ1j7c.js";import{A as z}from"./AuthenticatedLayout-DinCI_jA.js";import{P as d}from"./PrimaryButton-w4LuAXHx.js";import{D as C}from"./DangerButton-6CQWUw8r.js";import{S as j}from"./SecondaryButton-DqsL44OG.js";import{M as b}from"./Modal-CAr-gwKz.js";import{_ as s}from"./lang-BBLCHUjz.js";import{T as H}from"./TextInput-BJ_vSqdm.js";import{I as h}from"./InputLabel-BuNHIFco.js";import{I as u}from"./InputError-DI7IH1vY.js";import{P as L}from"./Pagination-Z71IkalD.js";import"./Dropdown-D2P50xqB.js";import"./transition-B3VWNPEY.js";import"./ThemeToggle-dTOLvmBw.js";import"./useTheme-ZKsmi1Rg.js";function W({show:v=!1,request:a,onConfirm:l,onCancel:o,processing:r=!1}){if(!a)return null;const i=()=>{l(a)};return e.jsx(b,{show:v,onClose:o,maxWidth:"md",children:e.jsxs("form",{onSubmit:c=>{c.preventDefault(),i()},className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:s("Confirm Photo Approval")}),e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsxs("div",{className:"mb-4 relative group",children:[e.jsx("img",{src:a.photo_url,alt:a.user.name,className:"w-32 h-32 rounded-full object-cover border-4 border-gray-100 dark:border-gray-700 shadow-lg transition-transform transform group-hover:scale-105 duration-300"}),e.jsx("div",{className:"absolute inset-0 rounded-full border border-gray-200 dark:border-gray-600 pointer-events-none"})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:a.user.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:a.user.email}),e.jsx("span",{className:"mt-2 px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200 capitalize",children:s(a.user.role)})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(j,{type:"button",onClick:o,disabled:r,children:s("Cancel")}),e.jsx(d,{type:"submit",className:"bg-green-600 hover:bg-green-700 focus:bg-green-700 active:bg-green-800 dark:bg-green-500 dark:hover:bg-green-400 dark:focus:bg-green-400 dark:active:bg-green-300 border-green-600 dark:border-green-500",disabled:r,children:r?s("Approving..."):s("Approve Photo")})]})]})})}function oe({auth:v,requests:a}){const[l,o]=g.useState(null),[r,i]=g.useState(null),[c,n]=g.useState(!1),{data:P,setData:w,post:S,processing:m,errors:R,reset:A}=f({reason:""}),{post:_,processing:x}=f({}),{data:G,setData:y,post:B,processing:M,errors:N,reset:D}=f({csv_file:null,photos:[]}),F=t=>{i(t)},k=()=>{i(null)},I=t=>{_(route("admin.profile-photos.approve",t.id),{onSuccess:()=>k()})},E=t=>{o(t)},p=()=>{o(null),A()},U=t=>{t.preventDefault(),S(route("admin.profile-photos.reject",l.id),{onSuccess:()=>p()})},V=t=>{t.preventDefault(),B(route("admin.profile-photos.bulk-upload-csv"),{forceFormData:!0,onSuccess:()=>{n(!1),D()}})};return e.jsxs(z,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:s("Profile Photo Management")}),e.jsx(d,{onClick:()=>n(!0),children:s("Bulk Upload (CSV)")})]}),children:[e.jsx(T,{title:s("Photo Management")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsxs("h3",{className:"text-lg font-bold mb-6",children:[s("Pending Requests")," (",a.total,")"]}),a.data.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:s("No pending photo requests.")}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.data.map(t=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 flex flex-col items-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:t.photo_url,alt:t.user.name,className:"w-32 h-32 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:"font-semibold",children:t.user.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.user.email}),e.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1 capitalize",children:s(t.user.role)})]}),e.jsxs("div",{className:"flex space-x-2 w-full",children:[e.jsx(d,{onClick:()=>F(t),className:"flex-1 justify-center text-xs",disabled:m||x,children:s("Approve")}),e.jsx(C,{onClick:()=>E(t),className:"flex-1 justify-center text-xs",disabled:m||x,children:s("Reject")})]})]},t.id))}),e.jsx("div",{className:"mt-6",children:e.jsx(L,{links:a.links})})]})})})}),e.jsx(W,{show:!!r,request:r,onConfirm:I,onCancel:k,processing:x}),e.jsx(b,{show:!!l,onClose:p,children:e.jsxs("form",{onSubmit:U,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:s("Reject Profile Photo")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:s("Please provide a reason for rejecting the photo for :name",{name:l?.user.name})}),e.jsxs("div",{className:"mt-6",children:[e.jsx(h,{htmlFor:"reason",value:s("Reason"),className:"sr-only"}),e.jsx(H,{id:"reason",type:"text",name:"reason",value:P.reason,onChange:t=>w("reason",t.target.value),className:"mt-1 block w-full",placeholder:s("e.g., Image is blurry, inappropriate content, etc."),isFocused:!0}),e.jsx(u,{message:R.reason,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(j,{onClick:p,children:s("Cancel")}),e.jsx(C,{className:"ms-3",disabled:m,children:s("Reject Photo")})]})]})}),e.jsx(b,{show:c,onClose:()=>n(!1),children:e.jsxs("form",{onSubmit:V,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:s("Bulk Upload Profile Photos")}),e.jsxs("div",{className:"mt-6",children:[e.jsx(h,{htmlFor:"csv_file",value:s("CSV Template")}),e.jsx("input",{id:"csv_file",type:"file",accept:".csv",onChange:t=>y("csv_file",t.target.files[0]),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[s("CSV format"),": ",e.jsx("code",{children:"id_number,photo_name"})]}),e.jsx(u,{message:N.csv_file,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(h,{htmlFor:"photos",value:s("Photo Files")}),e.jsx("input",{id:"photos",type:"file",multiple:!0,accept:"image/*",onChange:t=>y("photos",Array.from(t.target.files)),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s("Upload all photos listed in the CSV.")}),e.jsx(u,{message:N.photos,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(j,{onClick:()=>n(!1),children:s("Cancel")}),e.jsx(d,{className:"ms-3",disabled:M,children:s("Start Bulk Upload")})]})]})})]})}export{oe as default};
