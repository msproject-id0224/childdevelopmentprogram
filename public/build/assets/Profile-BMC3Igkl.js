import{a as I,r as _,u as A,j as e,H as M,L as B}from"./app-BF_e_Rdy.js";import{A as E}from"./AuthenticatedLayout-DbifM-Jj.js";import{I as l}from"./InputLabel-DFaqN2cU.js";import{T as m}from"./TextInput-B1g3ssf1.js";import{S as R}from"./SelectInput-CvdTLkp9.js";import{P as k}from"./PrimaryButton-kgonJzl3.js";import{S as z}from"./SecondaryButton-Dh5JYrG7.js";import{I as o}from"./InputError-C-0TgvcP.js";import{M as H}from"./Modal-DWOZPDE9.js";import{_ as a}from"./lang-BBLCHUjz.js";import"./Dropdown-DXsKi9BE.js";import"./transition-DGGVtMAX.js";import"./ThemeToggle-5mAKfxz7.js";import"./DangerButton-Drnabt0D.js";import"./useTheme-H-g0SFOs.js";function te({auth:L,rmdProfile:f,graduationPlanDate:y}){const r=L.user,{flash:K}=I().props,[p,j]=_.useState(!1),[u,b]=_.useState({show:!1,type:"success",title:"",message:""}),{data:t,setData:i,post:P,processing:x,errors:d,reset:C}=A({first_name:r.first_name||"",last_name:r.last_name||"",email:r.email||"",phone_number:r.phone_number||"",address:r.address||"",date_of_birth:r.date_of_birth||"",gender:r.gender||"",profile_photo:null,first_filled_at:f?.first_filled_at||new Date().toISOString().split("T")[0],first_filled_age:f?.first_filled_age||r.age||"",first_filled_education:f?.first_filled_education||r.education||""}),[S,N]=_.useState(r.profile_photo_url),F=s=>{const c=s.target.files[0];if(i("profile_photo",c),c){const v=new FileReader;v.onloadend=()=>{N(v.result)},v.readAsDataURL(c)}},D=s=>{s.preventDefault(),P(route("rmd.profile.store"),{forceFormData:!0,onSuccess:()=>{j(!1),b({show:!0,type:"success",title:a("Berhasil!"),message:a("Data profil Anda telah berhasil disimpan.")})},onError:c=>{b({show:!0,type:"error",title:a("Gagal!"),message:a("Terjadi kesalahan saat menyimpan data. Silakan periksa kembali inputan Anda.")})}})},w=()=>{b(s=>({...s,show:!1}))},T=()=>{C(),N(r.profile_photo_url),j(!1)},h=s=>s?new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-",g=t.date_of_birth?new Date(new Date(t.date_of_birth).setFullYear(new Date(t.date_of_birth).getFullYear()+21)):y?new Date(y):null,n=({label:s,value:c})=>e.jsxs("div",{className:"py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:s}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 dark:text-gray-100 font-semibold",children:c||"-"})]});return e.jsxs(E,{user:r,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:a("Profil Pribadiku")}),children:[e.jsx(M,{title:"Profil Pribadiku"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-3xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a("PROFIL PRIBADIKU")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400 max-w-xl",children:a("Isilah profil pribadi ini sesuai dengan keadaanmu yang sesungguhnya.")})]}),!p&&e.jsxs(k,{onClick:()=>j(!0),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),a("Edit Profil")]})]}),p?e.jsxs("form",{onSubmit:D,className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"relative w-32 h-32 mb-4 group",children:[e.jsx("img",{src:S||"https://ui-avatars.com/api/?name="+r.name,alt:"Profile",className:"w-full h-full rounded-full object-cover border-4 border-white dark:border-gray-600 shadow-lg"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-40 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),e.jsx("label",{htmlFor:"profile_photo",className:"cursor-pointer text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm",children:a("Klik untuk mengubah foto")}),e.jsx("input",{type:"file",id:"profile_photo",onChange:F,className:"hidden",accept:"image/*"}),e.jsx(o,{message:d.profile_photo,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"first_name",value:a("Nama Depan")}),e.jsx(m,{id:"first_name",value:t.first_name,onChange:s=>i("first_name",s.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(o,{message:d.first_name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"last_name",value:a("Nama Belakang")}),e.jsx(m,{id:"last_name",value:t.last_name,onChange:s=>i("last_name",s.target.value),className:"mt-1 block w-full"}),e.jsx(o,{message:d.last_name,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",value:a("Email")}),e.jsx(m,{id:"email",type:"email",value:t.email,className:"mt-1 block w-full bg-gray-100 cursor-not-allowed",readOnly:!0,disabled:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a("Email tidak dapat diubah.")})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone_number",value:a("Nomor Telepon")}),e.jsx(m,{id:"phone_number",value:t.phone_number,onChange:s=>i("phone_number",s.target.value),className:"mt-1 block w-full"}),e.jsx(o,{message:d.phone_number,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"address",value:a("Alamat")}),e.jsx(m,{id:"address",value:t.address,onChange:s=>i("address",s.target.value),className:"mt-1 block w-full"}),e.jsx(o,{message:d.address,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"date_of_birth",value:a("Tanggal Lahir")}),e.jsx(m,{id:"date_of_birth",type:"date",value:t.date_of_birth,onChange:s=>i("date_of_birth",s.target.value),className:"mt-1 block w-full"}),e.jsx(o,{message:d.date_of_birth,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"gender",value:a("Jenis Kelamin")}),e.jsxs(R,{id:"gender",value:t.gender,onChange:s=>i("gender",s.target.value),className:"mt-1 block w-full",children:[e.jsx("option",{value:"",children:a("Pilih Jenis Kelamin")}),e.jsx("option",{value:"Male",children:a("Laki-laki")}),e.jsx("option",{value:"Female",children:a("Perempuan")})]}),e.jsx(o,{message:d.gender,className:"mt-2"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:[e.jsx(l,{value:a("Tanggal Rencana Kelulusan PPA (21 Tahun)"),className:"text-blue-800 dark:text-blue-300"}),e.jsx("div",{className:"mt-1 text-lg font-bold text-blue-900 dark:text-blue-200",children:g?h(g.toISOString()):"-"}),e.jsx("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:a("*Otomatis dihitung berdasarkan tanggal lahir + 21 tahun")})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h4",{className:"font-semibold mb-4 text-lg text-gray-800 dark:text-gray-200",children:a("Data Pengisian Awal")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"first_filled_at",value:a("Tanggal Pengisian")}),e.jsx(m,{id:"first_filled_at",type:"date",value:t.first_filled_at,onChange:s=>i("first_filled_at",s.target.value),className:"mt-1 block w-full"}),e.jsx(o,{message:d.first_filled_at,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"first_filled_age",value:a("Usia")}),e.jsx(m,{id:"first_filled_age",type:"number",value:t.first_filled_age,onChange:s=>i("first_filled_age",s.target.value),className:"mt-1 block w-full"}),e.jsx(o,{message:d.first_filled_age,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"first_filled_education",value:a("Pendidikan")}),e.jsx(m,{id:"first_filled_education",value:t.first_filled_education,onChange:s=>i("first_filled_education",s.target.value),className:"mt-1 block w-full"}),e.jsx(o,{message:d.first_filled_education,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[e.jsx(z,{onClick:T,disabled:x,children:a("Batal")}),e.jsxs(k,{disabled:x,className:x?"opacity-75 cursor-wait":"",children:[x&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a("Simpan Perubahan")]})]})]}):e.jsx("div",{className:"space-y-8 animate-fade-in",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-full md:w-auto flex justify-center",children:e.jsx("div",{className:"relative w-40 h-40",children:e.jsx("img",{src:r.profile_photo_url||"https://ui-avatars.com/api/?name="+r.name,alt:"Profile",className:"w-full h-full rounded-full object-cover border-4 border-gray-200 dark:border-gray-700 shadow-md"})})}),e.jsxs("div",{className:"flex-grow w-full grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-4",children:[e.jsx("div",{className:"col-span-1 md:col-span-2 pb-2 mb-2 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:a("Informasi Pribadi")})}),e.jsx(n,{label:a("Nama Lengkap"),value:`${t.first_name} ${t.last_name}`}),e.jsx(n,{label:a("Email"),value:t.email}),e.jsx(n,{label:a("Nomor Telepon"),value:t.phone_number}),e.jsx(n,{label:a("Jenis Kelamin"),value:t.gender==="Male"?a("Laki-laki"):t.gender==="Female"?a("Perempuan"):"-"}),e.jsx(n,{label:a("Tanggal Lahir"),value:h(t.date_of_birth)}),e.jsx(n,{label:a("Alamat"),value:t.address}),e.jsx("div",{className:"col-span-1 md:col-span-2 mt-4 pb-2 mb-2 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:a("Rencana Masa Depan")})}),e.jsx(n,{label:a("Tanggal Rencana Kelulusan (21 Th)"),value:g?h(g.toISOString()):"-"}),e.jsx(n,{label:a("Pendidikan Saat Awal"),value:t.first_filled_education}),e.jsx(n,{label:a("Usia Saat Awal"),value:`${t.first_filled_age||"-"} Tahun`}),e.jsx(n,{label:a("Tanggal Pengisian Awal"),value:h(t.first_filled_at)})]})]})}),!p&&e.jsx("div",{className:"flex justify-end mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs(B,{href:route("rmd.gods-purpose"),className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-500 active:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150",children:[a("Lanjut: Tujuan Tuhan Bagimu")," Â»"]})})]})})})}),e.jsx(H,{show:u.show,onClose:w,maxWidth:"sm",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:`mx-auto flex h-12 w-12 items-center justify-center rounded-full ${u.type==="success"?"bg-green-100":"bg-red-100"}`,children:u.type==="success"?e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}):e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-5",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100",id:"modal-title",children:u.title}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.message})})]}),e.jsx("div",{className:"mt-5 sm:mt-6",children:e.jsx(k,{type:"button",className:"w-full justify-center",onClick:w,children:a("Tutup")})})]})})]})}export{te as default};
