import{r as d,j as e,u as G,c as J,H as K,L as z}from"./app-BF_e_Rdy.js";import{A as Q}from"./AuthenticatedLayout-DbifM-Jj.js";import{_ as t}from"./lang-BBLCHUjz.js";import{T as y}from"./TextInput-B1g3ssf1.js";import{I as j}from"./InputLabel-DFaqN2cU.js";import{M as Y}from"./Modal-DWOZPDE9.js";import{P as O}from"./PrimaryButton-kgonJzl3.js";import{S as V}from"./SecondaryButton-Dh5JYrG7.js";import{I as f}from"./InputError-C-0TgvcP.js";import{D as W}from"./DangerButton-Drnabt0D.js";import{S as B}from"./SelectInput-CvdTLkp9.js";import"./Dropdown-DXsKi9BE.js";import"./transition-DGGVtMAX.js";import"./ThemeToggle-5mAKfxz7.js";import"./useTheme-H-g0SFOs.js";function X(){const[u,L]=d.useState([]),[m,i]=d.useState({}),[x,c]=d.useState(!0),[g,v]=d.useState(null),[S,C]=d.useState(!1),[b,A]=d.useState(null),[k,w]=d.useState(""),[h,n]=d.useState(!1),[D,I]=d.useState([]),[_,M]=d.useState(!1),[s,p]=d.useState({page:1,search:"",status:"all",priority:"all",sort_by:"date",sort_order:"asc"}),[N,F]=d.useState("");d.useEffect(()=>{const a=setTimeout(()=>{p(l=>({...l,search:N,page:1}))},500);return()=>clearTimeout(a)},[N]);const P=d.useCallback(async(a=!1)=>{a||c(!0),v(null);try{const l=await window.axios.get(route("api.schedules"),{params:s});L(l.data.data),i({current_page:l.data.current_page,last_page:l.data.last_page,from:l.data.from,to:l.data.to,total:l.data.total,links:l.data.links})}catch(l){console.error(l),v(t("Failed to load schedule data. Please try again later."))}finally{a||c(!1)}},[s]);d.useEffect(()=>{P();const a=setInterval(()=>P(!0),3e4);return()=>clearInterval(a)},[P]);const E=a=>{p(l=>({...l,sort_by:a,sort_order:l.sort_by===a&&l.sort_order==="asc"?"desc":"asc"}))},R=a=>{p(l=>({...l,page:a}))},T=a=>{switch(a){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},H=a=>{switch(a){case"scheduled":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"ongoing":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},U=a=>{A(a),w(""),I([]),C(!0),$(a)},$=async a=>{M(!0);try{const l=await axios.get(route("api.schedules.messages",a));I(l.data)}catch(l){console.error(l)}finally{M(!1)}},r=()=>{C(!1),A(null),w("")},o=async a=>{if(a.preventDefault(),!!k.trim()){n(!0);try{await window.axios.post(route("api.schedule-messages.store"),{schedule_id:b,message:k}),w(""),$(b)}catch(l){console.error("Error sending message:",l),alert("Failed to send message.")}finally{n(!1)}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsx("div",{className:"w-full sm:w-1/3",children:e.jsx(y,{type:"text",className:"w-full",placeholder:t("Search activity..."),value:N,onChange:a=>F(a.target.value)})}),e.jsx("div",{className:"w-full sm:w-1/4",children:e.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:s.status,onChange:a=>p(l=>({...l,status:a.target.value,page:1})),children:[e.jsx("option",{value:"all",children:t("All Status")}),e.jsx("option",{value:"scheduled",children:t("Scheduled")}),e.jsx("option",{value:"ongoing",children:t("Ongoing")}),e.jsx("option",{value:"completed",children:t("Completed")}),e.jsx("option",{value:"cancelled",children:t("Cancelled")})]})}),e.jsx("div",{className:"w-full sm:w-1/4",children:e.jsxs("select",{className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:s.priority,onChange:a=>p(l=>({...l,priority:a.target.value,page:1})),children:[e.jsx("option",{value:"all",children:t("All Priorities")}),e.jsx("option",{value:"high",children:t("High")}),e.jsx("option",{value:"medium",children:t("Medium")}),e.jsx("option",{value:"low",children:t("Low")})]})})]}),g&&e.jsx("div",{className:"p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-800 dark:text-red-100",role:"alert",children:g}),e.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>E("name"),children:e.jsxs("div",{className:"flex items-center",children:[t("Activity"),s.sort_by==="name"&&e.jsx("span",{className:"ml-1",children:s.sort_order==="asc"?"↑":"↓"})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>E("date"),children:e.jsxs("div",{className:"flex items-center",children:[t("Date & Time"),s.sort_by==="date"&&e.jsx("span",{className:"ml-1",children:s.sort_order==="asc"?"↑":"↓"})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:t("Location")}),e.jsx("th",{scope:"col",className:"px-6 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>E("priority"),children:e.jsxs("div",{className:"flex items-center",children:[t("Priority"),s.sort_by==="priority"&&e.jsx("span",{className:"ml-1",children:s.sort_order==="asc"?"↑":"↓"})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:t("Status")}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:t("Actions")})]})}),e.jsx("tbody",{children:x&&u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3 text-blue-500",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t("Loading...")]})})}):u.length>0?u.map(a=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:a.name}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{children:a.date}),e.jsxs("div",{className:"text-xs text-gray-500",children:[a.start_time?a.start_time.substring(0,5):""," - ",a.end_time?a.end_time.substring(0,5):""]})]}),e.jsx("td",{className:"px-6 py-4",children:a.location||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${T(a.priority)}`,children:a.priority?a.priority.charAt(0).toUpperCase()+a.priority.slice(1):"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${H(a.status)}`,children:a.status?a.status.charAt(0).toUpperCase()+a.status.slice(1):"Scheduled"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>U(a.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200 text-sm font-medium",children:t("Send Message")})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:t("No schedules found.")})})})]})}),m.last_page>1&&e.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:m.links&&m.links.map((a,l)=>e.jsx("button",{onClick:()=>a.url&&R(new URL(a.url).searchParams.get("page")),disabled:!a.url,className:`px-3 py-1 rounded-md text-sm ${a.active?"bg-blue-600 text-white":a.url?"bg-white text-gray-700 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 border border-gray-300 dark:border-gray-600":"text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:a.label}},l))}),x&&u.length>0&&e.jsx("div",{className:"text-right text-xs text-gray-400 mt-2",children:t("Updating data...")}),e.jsx(Y,{show:S,onClose:r,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:t("Send Message to Admin")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:t("Send a message regarding this schedule. The admin will be notified.")}),e.jsxs("div",{className:"mt-4 mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("History")}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md p-3 h-48 overflow-y-auto",children:_?e.jsx("p",{className:"text-center text-gray-500 text-sm py-4",children:t("Loading...")}):D.length===0?e.jsx("p",{className:"text-center text-gray-500 text-sm py-4",children:t("No messages yet.")}):e.jsx("div",{className:"space-y-3",children:D.map(a=>e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200",children:a.user?.name}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(a.created_at).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:a.message})]},a.id))})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(j,{htmlFor:"message",value:t("Message")}),e.jsx("textarea",{id:"message",className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",rows:"4",value:k,onChange:a=>w(a.target.value),placeholder:t("Type your message here...")})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(V,{onClick:r,children:t("Cancel")}),e.jsx(O,{className:"ml-3",onClick:o,disabled:h,children:h?t("Sending..."):t("Send Message")})]})]})})]})}function Z(){const[u,L]=d.useState([]),[m,i]=d.useState(!1),[x,c]=d.useState({}),[g,v]=d.useState({search:"",status:"all",date:"",priority:"all",page:1}),[S,C]=d.useState(!1),[b,A]=d.useState("add"),[k,w]=d.useState(null),{data:h,setData:n,post:D,patch:I,delete:_,processing:M,errors:s,reset:p,clearErrors:N}=G({name:"",date:"",start_time:"",end_time:"",description:"",priority:"medium",pic:"",location:"",status:"scheduled"}),F=async()=>{i(!0);try{const r={...g};Object.keys(r).forEach(a=>{(r[a]===""||r[a]==="all")&&delete r[a]});const o=await window.axios.get(route("api.schedules"),{params:r});L(o.data.data),c(o.data)}catch(r){console.error("Error fetching schedules:",r)}finally{i(!1)}};d.useEffect(()=>{const r=setTimeout(()=>{F()},300);return()=>clearTimeout(r)},[g]);const P=(r,o)=>{v(a=>({...a,[r]:o,page:1}))},E=r=>{if(!r)return;const a=new URL(r).searchParams.get("page");v(l=>({...l,page:a}))},R=(r,o=null)=>{A(r),w(o),N(),r==="edit"&&o?n({name:o.name,date:o.date,start_time:o.start_time?o.start_time.substring(0,5):"",end_time:o.end_time?o.end_time.substring(0,5):"",description:o.description||"",priority:o.priority,pic:o.pic,location:o.location||"",status:o.status||"scheduled"}):(p(),n("date",new Date().toISOString().split("T")[0])),C(!0)},T=()=>{C(!1),p()},H=r=>{r.preventDefault();const o=b==="add"?route("schedule.store"):route("schedule.update",k.id);(b==="add"?D:I)(o,{onSuccess:()=>{T(),F()}})},U=()=>{confirm(t("Are you sure you want to delete this activity?"))&&_(route("schedule.destroy",k.id),{onSuccess:()=>{T(),F()}})},$=r=>{switch(r){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsx(y,{placeholder:t("Search schedules..."),value:g.search,onChange:r=>P("search",r.target.value),className:"w-full sm:w-64"}),e.jsxs(B,{value:g.status,onChange:r=>P("status",r.target.value),className:"w-full sm:w-40",children:[e.jsx("option",{value:"all",children:t("All Status")}),e.jsx("option",{value:"scheduled",children:t("Scheduled")}),e.jsx("option",{value:"ongoing",children:t("Ongoing")}),e.jsx("option",{value:"completed",children:t("Completed")}),e.jsx("option",{value:"cancelled",children:t("Cancelled")})]}),e.jsx(y,{type:"date",value:g.date,onChange:r=>P("date",r.target.value),className:"w-full sm:w-40"})]}),e.jsx(O,{onClick:()=>R("add"),children:t("Add Schedule")})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("Activity")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("Date & Time")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("Priority")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("PIC")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("Status")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:t("Actions")})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:t("Loading...")})}):u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:t("No schedules found.")})}):u.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.name}),r.location&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.location})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:new Date(r.date).toLocaleDateString()}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.start_time.substring(0,5)," - ",r.end_time.substring(0,5)]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${$(r.priority)}`,children:t(r.priority)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:r.pic}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 capitalize",children:t(r.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>R("edit",r),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3",children:t("Edit")})})]},r.id))})]})}),x.links&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-400",children:[t("Showing")," ",x.from," ",t("to")," ",x.to," ",t("of")," ",x.total," ",t("results")]}),e.jsx("div",{className:"flex gap-1",children:x.links.map((r,o)=>e.jsx("button",{onClick:()=>E(r.url),disabled:!r.url||r.active,className:`px-3 py-1 rounded text-sm ${r.active?"bg-indigo-600 text-white":r.url?"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600":"text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:r.label}},o))})]})})]}),e.jsx(Y,{show:S,onClose:T,children:e.jsxs("form",{onSubmit:H,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-6",children:b==="add"?t("Add Schedule"):t("Edit Schedule")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"name",value:t("Activity Name")}),e.jsx(y,{id:"name",value:h.name,onChange:r=>n("name",r.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(f,{message:s.name,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"date",value:t("Date")}),e.jsx(y,{id:"date",type:"date",value:h.date,onChange:r=>n("date",r.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(f,{message:s.date,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"status",value:t("Status")}),e.jsxs(B,{id:"status",value:h.status,onChange:r=>n("status",r.target.value),className:"mt-1 block w-full",children:[e.jsx("option",{value:"scheduled",children:t("Scheduled")}),e.jsx("option",{value:"ongoing",children:t("Ongoing")}),e.jsx("option",{value:"completed",children:t("Completed")}),e.jsx("option",{value:"cancelled",children:t("Cancelled")})]}),e.jsx(f,{message:s.status,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"start_time",value:t("Start Time")}),e.jsx(y,{id:"start_time",type:"time",value:h.start_time,onChange:r=>n("start_time",r.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(f,{message:s.start_time,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"end_time",value:t("End Time")}),e.jsx(y,{id:"end_time",type:"time",value:h.end_time,onChange:r=>n("end_time",r.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(f,{message:s.end_time,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"location",value:t("Location")}),e.jsx(y,{id:"location",value:h.location,onChange:r=>n("location",r.target.value),className:"mt-1 block w-full"}),e.jsx(f,{message:s.location,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"priority",value:t("Priority")}),e.jsxs(B,{id:"priority",value:h.priority,onChange:r=>n("priority",r.target.value),className:"mt-1 block w-full",children:[e.jsx("option",{value:"low",children:t("Low")}),e.jsx("option",{value:"medium",children:t("Medium")}),e.jsx("option",{value:"high",children:t("High")})]}),e.jsx(f,{message:s.priority,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"pic",value:t("PIC")}),e.jsx(y,{id:"pic",value:h.pic,onChange:r=>n("pic",r.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(f,{message:s.pic,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"description",value:t("Description")}),e.jsx(y,{id:"description",value:h.description,onChange:r=>n("description",r.target.value),className:"mt-1 block w-full"}),e.jsx(f,{message:s.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[b==="edit"?e.jsx(W,{type:"button",onClick:U,disabled:M,children:t("Delete")}):e.jsx("div",{}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(V,{onClick:T,children:t("Cancel")}),e.jsx(O,{disabled:M,children:b==="add"?t("Create"):t("Update")})]})]})]})})]})}function q({initialRequests:u}){const[L,m]=d.useState(u||[]),[i,x]=d.useState(""),[c,g]=d.useState(null),[v,S]=d.useState(null);d.useEffect(()=>{m(u||[])},[u]);const{data:C,setData:b,post:A,processing:k,errors:w,reset:h}=G({reason:""}),n=L.filter(s=>s.user.name.toLowerCase().includes(i.toLowerCase())||s.user.email.toLowerCase().includes(i.toLowerCase())),D=s=>{confirm(t("Are you sure you want to approve this photo?"))&&(S(s),J.post(route("admin.profile-photos.approve",s),{},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m(p=>p.filter(N=>N.id!==s)),S(null)},onError:()=>S(null)}))},I=s=>{g(s),b("reason","")},_=()=>{g(null),h()},M=s=>{s.preventDefault(),A(route("admin.profile-photos.reject",c.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m(p=>p.filter(N=>N.id!==c.id)),_()}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:t("Pending Photo Requests")}),e.jsx("div",{className:"w-full sm:w-64",children:e.jsx(y,{type:"text",placeholder:t("Search requests..."),value:i,onChange:s=>x(s.target.value),className:"w-full"})})]}),n.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:i?t("No requests found matching your search."):t("No pending photo requests.")}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 flex flex-col items-center shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"mb-4 relative group",children:[e.jsx("img",{src:`/storage/${s.photo_path}`,alt:s.user.name,className:"w-32 h-32 rounded-full object-cover border-4 border-gray-100 dark:border-gray-700 group-hover:border-indigo-100 dark:group-hover:border-indigo-900 transition-colors"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity"})]}),e.jsxs("div",{className:"text-center mb-4 flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:s.user.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.user.email}),e.jsx("span",{className:`inline-block mt-2 px-2 py-0.5 text-[10px] rounded-full capitalize ${s.user.role==="mentor"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:t(s.user.role)}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex space-x-2 w-full mt-auto",children:[e.jsx(O,{onClick:()=>D(s.id),className:"flex-1 justify-center text-xs",disabled:v===s.id,children:v===s.id?t("Processing..."):t("Approve")}),e.jsx(W,{onClick:()=>I(s),className:"flex-1 justify-center text-xs",disabled:v===s.id,children:t("Reject")})]})]},s.id))}),e.jsx(Y,{show:!!c,onClose:_,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:t("Reject Profile Photo")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:t("Please provide a reason for rejecting the photo for :name",{name:c?.user.name})}),e.jsxs("div",{className:"mt-6",children:[e.jsx(j,{htmlFor:"reason",value:t("Reason"),className:"sr-only"}),e.jsx(y,{id:"reason",type:"text",name:"reason",value:C.reason,onChange:s=>b("reason",s.target.value),className:"mt-1 block w-full",placeholder:t("e.g., Image is blurry, inappropriate content, etc."),isFocused:!0}),e.jsx(f,{message:w.reason,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(V,{onClick:_,children:t("Cancel")}),e.jsx(W,{className:"ms-3",onClick:M,disabled:k,children:t("Reject Photo")})]})]})})]})}function ue({auth:u,schedules:L,photoRequests:m}){const i=u.user,x=i?.role||"participant",[c,g]=d.useState("overview");return i?e.jsxs(Q,{header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:[t("Dashboard")," ",x.charAt(0).toUpperCase()+x.slice(1)]}),children:[e.jsx(K,{title:t("Dashboard")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6",children:[e.jsxs("div",{className:"relative",children:[i.profile_photo_url?e.jsx("img",{src:i.profile_photo_url,alt:i.name,className:"w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-md"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center text-blue-600 dark:text-blue-400 text-2xl font-bold border-4 border-white dark:border-gray-800 shadow-md",children:i.name.charAt(0)}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-2 border-white dark:border-gray-800 shadow-sm ${i.profile_photo_status==="active"?"bg-green-500":i.profile_photo_status==="pending"?"bg-yellow-500":"bg-red-500"}`,title:t(`Photo Status: ${i.profile_photo_status}`)})]}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h4",{className:"text-lg font-semibold",children:i.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:i.email}),e.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-2",children:[e.jsxs("span",{className:`px-2 py-0.5 text-xs rounded-full ${i.profile_photo_status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":i.profile_photo_status==="pending"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[t("Photo Status"),": ",e.jsx("span",{className:"capitalize",children:t(i.profile_photo_status)})]}),e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 capitalize",children:t(i.role)})]})]})]})}),i.role==="admin"&&e.jsxs("div",{children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:[e.jsx("button",{onClick:()=>g("overview"),className:`${c==="overview"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:t("Overview")}),e.jsx("button",{onClick:()=>g("schedule"),className:`${c==="schedule"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:t("Schedule")}),e.jsxs("button",{onClick:()=>g("photos"),className:`${c==="photos"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[t("Photo Requests"),m&&m.length>0&&e.jsx("span",{className:"ml-2 bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-200 py-0.5 px-2 rounded-full text-xs",children:m.length})]})]})}),c==="overview"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:t("Admin Panel")}),e.jsx("p",{className:"mb-6",children:t("Welcome, Administrator. You have full access to the system.")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(z,{href:route("mentors.index"),className:"p-6 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition shadow-sm dark:bg-blue-900/20 dark:border-blue-800 dark:hover:bg-blue-900/30",children:[e.jsx("h4",{className:"font-semibold text-blue-700 dark:text-blue-400",children:t("Mentor List")}),e.jsx("p",{className:"text-sm text-blue-600 mt-2 dark:text-blue-500",children:t("Manage and view all registered mentors.")})]}),e.jsxs(z,{href:route("participants.index"),className:"p-6 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition shadow-sm dark:bg-green-900/20 dark:border-green-800 dark:hover:bg-green-900/30",children:[e.jsx("h4",{className:"font-semibold text-green-700 dark:text-green-400",children:t("Participant List")}),e.jsx("p",{className:"text-sm text-green-600 mt-2 dark:text-green-500",children:t("Manage and view all registered participants.")})]})]})]}),c==="schedule"&&e.jsx("div",{className:"animate-fade-in",children:e.jsx(Z,{})}),c==="photos"&&e.jsx("div",{className:"animate-fade-in",children:e.jsx(q,{initialRequests:m})})]}),x==="mentor"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:t("Mentor/Implementer Panel")}),e.jsx("p",{className:"mb-6",children:t("Welcome, Mentor. You can manage participants and programs.")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:e.jsxs(z,{href:route("participants.index"),className:"p-6 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition shadow-sm dark:bg-green-900/20 dark:border-green-800 dark:hover:bg-green-900/30",children:[e.jsx("h4",{className:"font-semibold text-green-700 dark:text-green-400",children:t("Participant List")}),e.jsx("p",{className:"text-sm text-green-600 mt-2 dark:text-green-500",children:t("Manage and view all registered participants.")})]})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:t("Schedule")}),e.jsx(X,{})]})]}),x==="participant"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:t("Participant Panel")}),e.jsx("p",{children:t("Welcome to the Child Development Program. Please check your schedule.",{nickname:i.nickname||i.first_name})})]})]})})})})]}):null}export{ue as default};
